<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      #app {
        width: 500px;
        margin: 0 auto;
      }
      ul {
        margin: 0;
        padding: 0;
      }
      li {
        list-style: none;
        height: 50px;
        line-height: 50px;
      }
      .active {
        background-color: blueviolet;
      }
      .right {
        float: right;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <h2>Todolist</h2>
      <hr />
      <div>
        åç§°ï¼š<input
          type="text"
          v-model="proName"
          placeholder="è¯·è¾“å…¥å•†å“åç§°"
        />
        ä»·æ ¼ï¼š<input
          type="number"
          v-model="proPrice"
          placeholder="è¯·è¾“å…¥å•†å“ä»·æ ¼"
        />
        <button @click="add()">æ·»åŠ </button>
      </div>
      <div>
        <input
          type="text"
          v-model="searchValue"
          placeholder="è¯·è¾“å…¥æœç´¢å†…å®¹"
          @keyup="search()"
        />
        <button @click="search()">æœç´¢</button>
      </div>
      <ul>
        <li
          v-for="(obj,index) in list"
          @click="change(obj)"
          :class="{active:obj.isActive}"
          v-if="obj.isInclude"
        >
          <!-- å¦‚æœä½ çš„isActiveæ˜¯true å¤é€‰æ¡†å‹¾ä¸Š -->
          <input type="checkbox" v-model="obj.isActive" />
          <span>{{obj.name}}</span>
          <div class="right">
            <span>{{obj.name}}</span>
            <span @click.stop="del(index)">[ğŸ˜˜]</span>
          </div>
        </li>
      </ul>
      <div>
        <button @click="delAll()">åˆ é™¤é€‰ä¸­</button>
        <span>æ€»ä»·{{zongjia}}</span>
      </div>
    </div>
    <script src="vue/vue.js"></script>
    <script>
      new Vue({
        el: "#app",
        data: {
          list: [
            {
              name: "è‹¹æœ",
              price: 5000,
              isActive: false,
              isInclude: true,
            },
            {
              name: "apple11",
              price: 6666,
              isActive: false,
              isInclude: true,
            },
          ],
          proName: "",
          proPrice: "",
          searchValue: "",
        },
        methods: {
          add() {
            // è·å–è¾“å…¥æ¡†çš„name å’Œprice æ·»åŠ åˆ°listæ•°ç»„ä¸­
            this.list.push({
              name: this.proName,
              price: Number.parseFloat(this.proPrice),
              isActive: false,
              isInclude: true,
            });
            this.proName = "";
            this.proPrice = "";
          },
          change(obj) {
            obj.isActive = !obj.isActive;
          },
          totle() {
            let sum = 0;
            // è®¡ç®—listä¸­æ‰€æœ‰è¢«å‹¾é€‰çš„ä»·æ ¼å’Œ
            this.list.forEach(function (obj) {
              if (obj.isActive) {
                sum += obj.price;
              }
            });
            return sum;
          },
          del(index) {
            this.list.splice(index, 1);
          },
          delAll() {
            // å°†æ‰€æœ‰é€‰ä¸­çš„åˆ é™¤  (æ‰€æœ‰isActive = true )
            let arr = this.list.filter(function (obj, index) {
              //è¿‡æ»¤å‡ºæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜
              return obj.isActive == false;
            });
            this.list = arr;
          },
          search() {
            /* 
                    è¿‡æ»¤æ“ä½œæ˜¯å‡åˆ é™¤ ï¼Œ ç»™æ¯ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€ä¸ªisIncludeæ ‡è¯† trueä»£è¡¨åº”è¯¥æ˜¾ç¤º ï¼Œ
                    false ä»£è¡¨åº”è¯¥éšè—
                    å½“ç‚¹å‡»æœç´¢ ->å¾ªç¯listæ•°ç»„ æ–­listæ•°ç»„ä¸­æ¯ä¸€ä¸ªå¯¹è±¡ åŒ…å«searchValue 
                    å¦‚æœåŒ…å«æŠŠè¿™ä¸ªå¯¹è±¡æ·»åŠ ä¸€ä¸ªisIncludeå±æ€§ä¸ºtrue (ä»£è¡¨ä¸åˆ é™¤)
                    å¦åˆ™ ç»™è¿™ä¸ªå¯¹è±¡çš„isIncludeå±æ€§ ç½®ä¸ºfalse 
                     */
            this.list.forEach((obj, index) => {
              if (obj.name.includes(this.searchValue)) {
                obj.isInclude = true; //ä¸ç”¨åˆ é™¤
              } else {
                obj.isInclude = false;
              }
            });
          },
        },
        computed: {
          zongjia() {
            let sum = 0;
            // è®¡ç®—listä¸­æ‰€æœ‰è¢«å‹¾é€‰çš„ä»·æ ¼å’Œ
            this.list.forEach(function (obj) {
              if (obj.isActive) {
                sum += obj.price;
              }
            });
            return sum;
          },
        },
      });
    </script>
  </body>
</html>
